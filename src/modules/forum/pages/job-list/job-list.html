<section class="job-list-page">

    <div class="job-list-page-header mb-3">
        <div class="d-flex justify-content-between bg-white">
            <h3 class="title m-0 p-3 lightblack">Job</h3>
            <div class="text-right fs-xs flex flex-column justify-content-between">
                <a class="p-2 blue" id="post-list-create-button" href="/job/create" routerLink="/job/create">{{ app.text('create_a_post') }}</a>
                <div class="pr-2 pb-2 fs-sm">Page 1. 438 posts.</div>
            </div>
        </div>
        <small>This is job forum.</small>
    </div>

    <nav class="search-option">
        <button type="button" class="btn btn-primary btn-sm" (click)="onClickProfession()">Profession</button>
        <button type="button" class="btn btn-primary btn-sm" (click)="onClickLocation()">Location</button>
        <button type="button" class="btn btn-primary btn-sm" (click)="onClickMore()">More Option</button>
    </nav>

    <form [formGroup]="formGroup" novalidate class="search-form" *ngIf=" (searchBy | json) != '{}' " [class.more]=" searchBy.more ">
        <div class="row-container" *ngIf=" searchBy.more ">
            <label class="text">Gender</label>
            <div class="input">
                <label class="form-check-inline">
                    <input type="checkbox" id="male" formControlName="male"> Male
                </label>
                <label class="form-check-inline">
                    <input type="checkbox" id="female" formControlName="female"> Female
                </label>
            </div>
        </div>

        <div class="row-container" *ngIf=" searchBy.more ">
            <label class="text" for="experience">Experience</label>
            <div class="input">
                <select class="form-control" id="experience" formControlName="experience">
                    <option value="all">All</option>
                    <option value="0">No Work Experience</option>
                    <option [value]="3">3 months</option>
                    <option [value]="6">6 months</option>
                    <option [value]="9">9 months</option>
                    <option *ngFor="let number of numbers" [value]="number*12">{{number}} years</option>
                </select>
            </div>
        </div>


        <div class="row-container" *ngIf=" searchBy.profession ">
            <label class="text" for="profession">Profession</label>
            <div class="input">
                <select class="form-control" id="profession" formControlName="profession">
                    <option value="all">All</option>
                    <option value="housemaid">House Maid</option>
                    <option value="driver">Driver</option>
                    <option value="babysitter">Babysitter</option>
                </select>
            </div>
        </div>

        <div class="row-container" *ngIf=" searchBy.location ">
            <label class="text">Province</label>
            <div class="input">
                <select class="form-control" id="searchByProvince" formControlName="province" (change)="onClickProvince()">
                    <option value="all">All</option>
                    <option *ngFor="let province of provinces" [value]="province">{{province}}</option>
                </select>
            </div>
        </div>

        <div class="row-container" *ngIf="showCities && searchBy.location">
            <label class="text" *ngIf="showCities">City</label>
            <div class="input">
                <select class="form-control" id="city" formControlName="city">
                    <option *ngFor="let key of cityKeys" [value]="key">{{cities[key]}}</option>
                </select>
            </div>
        </div>

        <div class="row-container" *ngIf=" searchBy.more ">
            <label class="text">Age Range</label>
            <div class="input">
                <label class="range text">Min</label>
                <div class="range input">
                    <select class="form-control" id="searchByMinAge" formControlName="minAge" (change)="minRangeChange()">
                        <option [value]="minAge">{{minAge}}</option>
                        <option *ngFor="let min of minAgeRange" [value]="min+minAge">{{min+minAge}}</option>
                    </select>
                </div>
                <label class="range text">Max</label>
                <div class="range input">
                    <select class="form-control" id="searchByMaxAge" formControlName="maxAge" (change)="maxRangeChange()">
                        <option *ngFor="let max of maxAgeRange" [value]="max+betweenAge">{{max+betweenAge}}</option>
                        <option [value]="maxAge">{{maxAge}}</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="row-container" *ngIf=" searchBy.more ">
            <label for="name" class="text">Name</label>
            <div class="input">
                <input class="form-control" type="text" id="name" formControlName="name" placeholder="Input Name...">
            </div>
        </div>

        <div class="row-container" *ngIf=" searchBy.more && app.user.isLogin ">
                <label class="text">Show My Post</label>
                <div class="input">
                    <label class="form-check-inline">
                        <input type="checkbox" id="myPost" formControlName="myPost"> My Post Only
                    </label>
                </div>
        </div>

        <i class="close fa fa-times pointer" (click)=" searchBy = {} "></i>

    </form>
    <div class="pages" *ngIf="pages">
        <div class="page" *ngFor="let page of pages " >

            <div class="posts clearfix">
                <div class="post  mb-2 w-50  float-left" *ngFor="let job of page.posts " [attr.post-id]="job.ID" (click)=" job.active = ! job?.active">
                    <div class="profile card mx-1 p-2">
                        <div id="profile-user">
                            <span id="profile-user-photo">
                                <img src="{{ urlPhoto( job ) }}">
                            </span>
                        </div>
                        <div id="profile-info">
                            <div class="">{{ job?.fullname }}</div>
                            <div class="">Profession: {{ job?.profession }}</div>
                            <div class="">Mobile: {{job?.mobile}}</div>
                            <ng-container *ngIf="job['active']">
                                <div class="">Experience: {{job?.experience}}</div>
                                <div class="">Address: {{job?.address}}</div>
                                <div class="">Province: {{job?.province}}</div>
                                <div class="">City: {{job?.city}}</div>
                                <div class="">Message: {{job?.message}}</div>
                            </ng-container>
                        </div>
                        <div class="card-footer" *ngIf="job['active']">
                            <div class="nav-click" (click)="$event.stopPropagation(); onClickDelete( job )"><i class="fa fa-trash-o"></i> Delete</div>
                            <div class="nav-click" (click)="$event.stopPropagation(); onClickEdit( job.ID )"><i class="fa fa-pencil"></i> Update Post</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



<div *ngIf="inLoading" class="p-5">
    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i> loading...
</div>

<div *ngIf="noMorePosts">
    <h3>No more posts ... !</h3>
</div>
